"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),mod=process.cwd()+"/dist/functions/",docs={},lodash_1=require("lodash"),fs_1=tslib_1.__importDefault(require("fs"));function escape(e){return(0,lodash_1.escape)(e).replace(/\|/g,"&#124;")}function docify(e){var s=new Array;if(s.push(`# **${e.data.name}**`),s.push(`> **${(0,lodash_1.upperFirst)(escape(e.data.extra?.description))}** <br/>`),s.push("> "+escape(e.data.extra?.use)),s.push("- - -"),s.push(""),e.data.extra?.fields){s.push("### Fields"),s.push("| name | description | type | required |"),s.push("|------|-------------|------|----------|");for(const a of e.data.extra.fields)s.push(`| ${(0,lodash_1.upperFirst)(a.name)} | ${(0,lodash_1.upperFirst)(a.description||"unknown")} | ${(0,lodash_1.upperFirst)(escape(a.type))} | ${a.optional?"False":"True"} |`);s.push("")}return s.push("### Returns"),s.push("> "+(0,lodash_1.upperFirst)(escape(e.data.extra?.returns)||"Unknown")),s.push(""),s.push("### Example"),s.push("> ```php"),s.push(e.data.extra?.example),s.push("```"),s.join("\n")}for(const e of fs_1.default.readdirSync(mod))for(const f of fs_1.default.readdirSync(`${mod}/${e}/`)){const g=require(`../functions/${e}/`+f).data;g&&(docs[g.data.name]=docify(g),fs_1.default.writeFileSync(process.cwd()+"/doc/functions/"+g?.data.name+".md",docs[g.data.name],"utf-8"))}fs_1.default.writeFileSync(process.cwd()+"/doc/_sidebar.md",Object.keys(docs).map(e=>`* [${e}](functions/${e}.md)`).join("\n"),"utf-8");