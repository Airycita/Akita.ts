"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.data=void 0;const tslib_1=require("tslib"),builder_1=require("../../classes/builder"),utils_1=require("../../classes/utils"),lodash_1=tslib_1.__importDefault(require("lodash"));exports.data={data:(new builder_1.FunctionBuilder).setName("call").setValue("description","...").setValue("use","$callback[name;...params]").setValue("fields",[{name:"name",type:"string"},{name:"...params",type:"T"}]).setValue("example",'// client.addCallback("test", "$log[TEST;hi $1!!]")\n$call[test;Pavez] // TEST ;; hi Pavez!!').setValue("returns","Unknown"),code:async e=>{await e.func.resolve_fields(e);let[a,...l]=e.func.fields?.map(e=>e.value.unescape());var t,s;return e.client.cbs[a]?(s=e.client.cbs[a].replace(/\$(\d+)%/g,(e,a)=>l[Number(a)-1]),s=await(t=e).interpreter.parse(s.trim(),e,e.client),lodash_1.default.merge(e,s),e.code=t.code,e.func=t.func,{code:e.code?.replace(e.func.id,s?.metadata?.yield||s?.code||"")}):utils_1.Utils.Warn("Invalid Callback Name",e,!0)}};