"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.data=void 0;const builder_1=require("../../classes/builder");exports.data={data:(new builder_1.FunctionBuilder).setName("replace").setValue("description","...").setValue("use","$replace[text;pattern;replacer]").setValue("fields",[{name:"text",type:"string"},{name:"pattern",type:"string | regexp"},{name:"replacer",type:"string | void"}]).setValue("example","$replace[hello mid;hello;uwu]").setValue("returns","Void"),code:async function(){await this.resolveFields();let[e,a,r]=this.fields.split(!0);if(e.startsWith("var:")){var t=this.variable(e=e.slice(4));if("string"!=typeof t)return this.warn(`Variable ${e.bgYellow} is not a string`);e=t}if(/\/(.*?)\/(.+)?/g.test(a)&&(t=a.split("/"),a=new RegExp(t.slice(1,-1).join("/"),t.at(-1))),r.startsWith("run:")){let t=this.data.client.cbs[r=r.slice(4)];return t?(e=await e.asyncReplace(a,async(...a)=>{var e=await this.data.interpreter.parse(t.trim().replace(/\$(\d+)/g,(e,t)=>a[Number(t)-1]),this.data,this.data.client);return e?.metadata?.yields?.[0]||e?.code||""}),this.makeReturn(e)):this.warn(`callback ${t.bgYellow} does not exists`)}return this.makeReturn(e.replace(a,r))}};