"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.data=void 0;const builder_1=require("../../classes/builder");exports.data={data:(new builder_1.FunctionBuilder).setName("replace").setValue("description","...").setValue("use","$replace[text;pattern;replacer]").setValue("fields",[{name:"text",type:"string"},{name:"pattern",type:"string | regexp"},{name:"replacer",type:"string | void"}]).setValue("example","$replace[hello mid;hello;uwu]").setValue("returns","Void"),code:async function(){await this.resolveFields();let[e,t,a]=this.fields.split(!0);if(e.startsWith("var:")){var s=this.variable(e=e.slice(4));if("string"!=typeof s)return this.warn(`Variable ${e.bgYellow} is not a string`);e=s}if(/\/(.*?)\/(.+)?/g.test(t)&&(s=t.split("/"),t=new RegExp(s.slice(1,-1).join("/"),s.at(-1))),a.startsWith("run:")){const r=this.data.client.cbs[a=a.slice(4)];return r?(e=await e.asyncReplace(t,async(...a)=>{var e=await this.data.interpreter.parse(r.trim().replace(/\$(\d+)/g,(e,t)=>a[Number(t)-1]),this.data,this.data.client);return e?.metadata?.yields?.[0]||e?.code||""}),this.makeReturn(e)):this.warn(`callback ${r.bgYellow} does not exists`)}return this.makeReturn(e.replace(t,a))}};