"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.data=void 0;const tslib_1=require("tslib"),builder_1=require("../../classes/builder"),utils_1=require("../../classes/utils"),lodash_1=tslib_1.__importDefault(require("lodash"));async function Iterator(e,t){t=await e.interpreter.parse(t,e,e.client),lodash_1.default.merge(e,t)}async function Condition(e,t){return t=await e.interpreter.parse(t,e,e.client),lodash_1.default.merge(e,t),utils_1.Utils.condition(t.code)}exports.data={data:(new builder_1.FunctionBuilder).setName("for").setValue("description","like javascript for").setValue("use","$for[start;condition;iterator;code]").setValue("fields",[{name:"start",type:"number"},{name:"condition",type:"string<interpretableCode<boolean>>"},{name:"iterator",type:"string<interpretableCode> | string<default | default2>"},{name:"code",type:"string<interpretableCode>"}]).setValue("example","$for[0;$var[index]<100;default;$log[;INDEX NUMBER $var[index]]]").setValue("returns","Void"),code:async e=>{await e.func.resolve_field(e,0);var[t]=e.interpreter.fields(e);await e.interpreter._(e.func);let[a,r,i]=e.interpreter.fields(e,1);for(e.metadata.vars.index=Number(t);await Condition(e,a);async function(){"default"==r?e.metadata.vars.index++:"default2"==r?e.metadata.vars.index--:await Iterator(e,r)}()){var n=await e.interpreter.parse(i,e,e.client);lodash_1.default.merge(e,n)}return e.break=!1,{code:e.code?.replace(e.func.id,e.metadata.yields[e.func.id]||"")}}};