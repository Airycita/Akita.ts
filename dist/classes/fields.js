"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Fields=void 0;const utils_1=require("./utils");class Fields{options;data;fields=[];constructor(t,i={limit:void 0}){this.options=i;var s=(this.data=t).func.fields?.map(t=>t.value)||[];if(s&&i.limit)for(let t=0;t<i.limit;t++)t==i.limit&&(this.fields[t]=s.join(";")),this.fields[t]=s.shift()}pop(t=!1){var i=this.fields.pop();return t?utils_1.Utils.Types(this.data,[i]):i}shift(t=!1){var i=this.fields.shift().unescape();return t?utils_1.Utils.Types(this.data,[i]):i}get(t=0,i=null){return this.data.func.fields?.at(t)?.value??i}resolve(t=0,i=this.fields.length){return this.fields=utils_1.Utils.Types(this.data,this.fields.slice(t,i))}async unsolve(i=0,s=this.fields.length){if(this.fields)for(let t=i;t<s;t++)for(const e of this.fields[t].overs)await this.unsolve(e),this.data.func.fields[t].value=this.data.func.fields[t]?.value?.replaceAll(e.id,e.total),this.data.func.inside=this.data.func.inside?.replaceAll(e.id,e.total),this.data.func.total=this.data.func.total.replaceAll(e.id,e.total)}split(i=!0,t=0,s=this.fields.length){return this.fields.slice(t,s).map(t=>i&&"string"==typeof t?t.unescape():t)}}exports.Fields=Fields;