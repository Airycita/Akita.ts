"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;const tslib_1=require("tslib"),discord_js_1=tslib_1.__importStar(require("discord.js")),lodash_1=tslib_1.__importDefault(require("lodash"));class Container{data={fetchReply:!1,ephemeral:!1,attachments:void 0,components:[],content:void 0,embeds:[],files:[]};replyType="send";instance=null;constructor(){}reset(){this.data=(new Container).data}setInstance(t){return this.instance=t,this}addEmbed(t){return this.data.embeds&&this.data.embeds.push(new discord_js_1.EmbedBuilder(t)),this}addRow(){return(this.data.components||=[])&&this.data.components.push(new discord_js_1.ActionRowBuilder),this}addButton(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.ButtonBuilder(t)),this}addMenu(t,e,s=-1){return this.data.components?.at(s)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(s).addComponents(new discord_js_1.default[t+"SelectMenuBuilder"](e)),this}async send({content:t=this.data.content,ins:e=this.instance}={},s=!0){return e&&(this.data.content=t,t=null,e instanceof discord_js_1.BaseInteraction?(e instanceof discord_js_1.AutocompleteInteraction?t=e.respond([]).catch(lodash_1.default.noop):("reply"!=this.replyType&&(this.replyType="reply"),e.isRepliable()&&e.deferred&&(this.replyType="editReply")),t=await e[this.replyType]?.(this.data).catch(lodash_1.default.noop)):e instanceof discord_js_1.Message?t=await e["edit"==this.replyType?"edit":"reply"](this.data).catch(lodash_1.default.noop):(e instanceof discord_js_1.User||e instanceof discord_js_1.GuildMember||e instanceof discord_js_1.TextChannel)&&(t=await e.send(this.data).catch(lodash_1.default.noop)),s&&this.reset(),t)||null}}exports.Container=Container;