"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;const tslib_1=require("tslib"),discord_js_1=require("discord.js"),lodash_1=tslib_1.__importDefault(require("lodash"));class Container{data={fetchReply:!1,ephemeral:!1,attachments:void 0,components:[],content:void 0,embeds:[],files:[]};replyType="send";instance=null;constructor(){}reset(){this.data=(new Container).data}setInstance(t){return this.instance=t,this}addEmbed(t){return this.data.embeds&&this.data.embeds.push(new discord_js_1.EmbedBuilder(t)),this}addRow(){return(this.data.components||=[])&&this.data.components.push(new discord_js_1.ActionRowBuilder),this}addButton(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.ButtonBuilder(t)),this}addStringMenu(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.StringSelectMenuBuilder(t)),this}addUserMenu(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.UserSelectMenuBuilder(t)),this}addRoleMenu(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.RoleSelectMenuBuilder(t)),this}addChannelMenu(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.ChannelSelectMenuBuilder(t)),this}addMentionableMenu(t,e=-1){return this.data.components?.at(e)instanceof discord_js_1.ActionRowBuilder&&this.data.components.at(e).addComponents(new discord_js_1.MentionableSelectMenuBuilder(t)),this}async send({content:e=this.data.content,ins:n=this.instance}={},s=!0){if(n){this.data.content=e;let t=null;return n instanceof discord_js_1.BaseInteraction?(n instanceof discord_js_1.AutocompleteInteraction?t=n.respond([]).catch(lodash_1.default.noop):("reply"!=this.replyType&&(this.replyType="reply"),n.isRepliable()&&n.deferred&&(this.replyType="editReply")),t=await n[this.replyType]?.(this.data).catch(lodash_1.default.noop)):n instanceof discord_js_1.Message?t=await n["edit"==this.replyType?"edit":"reply"](this.data).catch(lodash_1.default.noop):(n instanceof discord_js_1.User||n instanceof discord_js_1.GuildMember||n instanceof discord_js_1.TextChannel)&&(t=await n.send(this.data).catch(lodash_1.default.noop)),s&&this.reset(),t||null}return null}}exports.Container=Container;