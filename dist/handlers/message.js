"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const context_1=require("../classes/context");async function default_1(e,a,t){let o=new context_1.Context(e),s=a.prefixes?.map(async t=>t.includes("$")?(await a.resolve(t,{metadata:{msg:e,prefix:t,ctx:o}}))?.code:t),r=await s?.find(async t=>e.content.startsWith(await t)),c=a.getCommands("MESSAGE","$any","filter");if(c.length&&(1==t?.bots||!e.author.bot)){var n,i=e.content.trim().split(/ +/g);for(n of c)a.resolve(n.code,{metadata:{cmd:n,args:i,msg:e,ctx:o}},a)}if(r&&(t?.bots||!e.author.bot)){var f=(t=e.content.slice(r.length).trim().split(/ +/g)).shift()?.toLocaleLowerCase();if(f){var l=a.getCommands("MESSAGE",f,"filter"),d={metadata:{msg:e,args:t,cmd:f,ctx:o}};if(l)for(var m of l)a.resolve(m.code,d,a)}}}exports.default=default_1;